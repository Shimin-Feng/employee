<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <!-- CSS only -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" rel="stylesheet">
    <link href="/css/index.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- JavaScript Bundle with Popper -->
    <script crossorigin="anonymous"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/index.js"></script>
    <title>员工管理</title>
</head>
<body class="container">
<div>
    <h1>员工管理</h1>
    <div>
        欢迎: <a id="username" sec:authentication="name"></a>
        <form action="/logout" id="logout" method="post">
            <button class="btn btn-primary" type="submit">退出</button>
        </form>
        <form action="" id="findForm">
            <label for="findInput">
                <input class="form-control" id="findInput" placeholder="请输入搜索内容" type="text">
            </label>
            <button class="btn btn-primary" id="findButton" onclick="findEmployee()" type="button">查找员工</button>
        </form>
        <!-- Button trigger modal -->
        <button class="btn btn-primary" data-bs-target="#exampleModal" data-bs-toggle="modal" id="save" type="button">
            添加员工
        </button>
    </div>
</div>
<div>
    <table class="table table-hover">
        <thead>
        <tr>
            <td th:text="'#'"></td>
            <td th:text='姓名'></td>
            <td th:text='性别'></td>
            <td th:text='年龄'></td>
            <td th:text='身份证号码'></td>
            <td th:text='住址'></td>
            <td th:text='电话号码'></td>
            <td th:text='添加者'></td>
            <td th:text='添加时间'></td>
            <td th:text='最后操作时间'></td>
            <td th:text='更改'></td>
            <td th:text='删除'></td>
        </tr>
        </thead>
        <tbody>
        <tr th:each="employee, stat: ${employees}" th:id="'trId' + ${stat.count}">
            <td th:text="${stat.count}"></td>
            <td>
                <label>
                    <input maxlength="25" th:value="${employee.employeeName}" type="text">
                </label>
            </td>
            <td>
                <label>
                    <select th:class="${employee.employeeSex}" th:id="'sexSelectId' + ${stat.count}">
                        <option th:text="男" value="男"></option>
                        <option th:text="女" value="女"></option>
                    </select>
                </label>
            </td>
            <td>
                <label>
                    <select th:class="${employee.employeeAge}" th:id="'ageSelectId' + ${stat.count}">
                        <option th:text="18" value="18"></option>
                        <option th:text="19" value="19"></option>
                        <option th:text="20" value="20"></option>
                        <option th:text="21" value="21"></option>
                        <option th:text="22" value="22"></option>
                        <option th:text="23" value="23"></option>
                        <option th:text="24" value="24"></option>
                        <option th:text="25" value="25"></option>
                        <option th:text="26" value="26"></option>
                        <option th:text="27" value="27"></option>
                        <option th:text="28" value="28"></option>
                        <option th:text="29" value="29"></option>
                        <option th:text="30" value="30"></option>
                        <option th:text="31" value="31"></option>
                        <option th:text="32" value="32"></option>
                        <option th:text="33" value="33"></option>
                        <option th:text="34" value="34"></option>
                        <option th:text="35" value="35"></option>
                        <option th:text="36" value="36"></option>
                        <option th:text="37" value="37"></option>
                        <option th:text="38" value="38"></option>
                        <option th:text="39" value="39"></option>
                        <option th:text="40" value="40"></option>
                        <option th:text="41" value="41"></option>
                        <option th:text="42" value="42"></option>
                        <option th:text="43" value="43"></option>
                        <option th:text="44" value="44"></option>
                        <option th:text="45" value="45"></option>
                        <option th:text="46" value="46"></option>
                        <option th:text="47" value="47"></option>
                        <option th:text="48" value="48"></option>
                        <option th:text="49" value="49"></option>
                        <option th:text="50" value="50"></option>
                        <option th:text="51" value="51"></option>
                        <option th:text="52" value="52"></option>
                        <option th:text="53" value="53"></option>
                        <option th:text="54" value="54"></option>
                        <option th:text="55" value="55"></option>
                        <option th:text="56" value="56"></option>
                        <option th:text="57" value="57"></option>
                        <option th:text="58" value="58"></option>
                        <option th:text="59" value="59"></option>
                        <option th:text="60" value="60"></option>
                        <option th:text="61" value="61"></option>
                        <option th:text="62" value="62"></option>
                        <option th:text="63" value="63"></option>
                        <option th:text="64" value="64"></option>
                        <option th:text="65" value="65"></option>
                    </select>
                </label>
            </td>
            <td>
                <label>
                    <input maxlength="18" th:value="${employee.employeeIdCard}" type="text">
                </label>
            </td>
            <td>
                <label>
                    <input maxlength="45" th:value="${employee.employeeAddress}" type="text">
                </label>
            </td>
            <td>
                <label>
                    <input maxlength="11" th:value="${employee.employeePhoneNumber}" type="text">
                </label>
            </td>
            <td th:text="${employee.createdBy}"></td>
            <td th:text="${employee.createdDate}"></td>
            <td th:text="${employee.lastModifiedDate}"></td>
            <td>
                <!-- console.log('$(\'#username\').text()---------' + $('#username').text()); -->
                <button class="btn btn-primary"
                        th:onclick="updateEmployee([[${stat.count}]], [[${employee.employeeId}]], [[${employee.createdDate}]])"
                        type="button">更改
                </button>
            </td>
            <td>
                <form action="">
                    <button class="btn btn-primary" th:onclick="deleteEmployee([[${employee.employeeId}]], this)"
                            type="button">删除
                    </button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<div class="modal-footer no-margin-top">
    <ul class="pagination pull-right no-margin" th:if="${employees != null}">
        <li>
            <a href='/employee/index?pageNum=0' th:text="首页"></a>
        </li>
        <li th:if="${employees.hasPrevious()}">
            <a th:href="'/employee/index?pageNum=' + ${employees.previousPageable().getPageNumber()}" th:text="上一页"></a>
        </li>
        <li th:each="pageNum:${#numbers.sequence(0, employees.getTotalPages() - 1)}">
            <a th:href="'/employee/index?pageNum=' + ${pageNum}"
               th:if="${pageNum ne employees.pageable.getPageNumber()}"
               th:text="${pageNum + 1}"></a>
            <a style='font-weight:bold;background: #6faed9;'
               th:href="'/employee/index?pageNum=' + ${pageNum}"
               th:if="${pageNum eq employees.pageable.getPageNumber()}" th:text="${pageNum + 1}"></a>
        </li>
        <li th:if="${employees.hasNext()}">
            <a th:href="'/employee/index?pageNum=' + ${employees.nextPageable().getPageNumber()}" th:text="下一页"></a>
        </li>
        <li>
            <a th:href="'/employee/index?pageNum=' + ${employees.getTotalPages() - 1}" th:text="尾页"></a>
        </li>

    </ul>
</div>

<!-- Modal -->
<div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" data-bs-backdrop="static"
     id="exampleModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">新员工信息</h5>
                <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
            </div>
            <div class="modal-body">
                <form action="">
                    <div class="mb-3">
                        <label class="col-form-label" for="recipient-name">姓名:</label>
                        <input class="form-control" id="recipient-name" maxlength="25" type="text">
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label" for="recipient-sxe">性别:</label>
                        <input class="form-control" id="recipient-sxe" type="text">
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label" for="recipient-age">年龄:</label>
                        <input class="form-control" id="recipient-age" maxlength="2" type="text">
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label" for="recipient-idCard">身份证号码:</label>
                        <input class="form-control" id="recipient-idCard" maxlength="18" type="text">
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label" for="recipient-address">住址:</label>
                        <input class="form-control" id="recipient-address" maxlength="45" type="text">
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label" for="recipient-phoneNumber">电话号码:</label>
                        <input class="form-control" id="recipient-phoneNumber" maxlength="11" type="text">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">关闭</button>
                <button class="btn btn-primary" data-bs-dismiss="modal" id="additionEmployee"
                        onclick="additionEmployee()" type="button">确定添加
                </button>
            </div>
        </div>
    </div>
</div>
</body>
</html>