<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <!-- CSS only -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" rel="stylesheet">
    <link href="/css/employee.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- JavaScript Bundle with Popper -->
    <script crossorigin="anonymous"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/employee.js"></script>
    <title>员工管理</title>
</head>
<body class="container">
<div>
    <h1>员工管理</h1>
    <div class="input-group mb-3">
        <a>欢迎:&nbsp;</a>
        <a id="username" sec:authentication="name"></a>
        <a href="/index">返回</a>
        <form action="/logout" method="post">
            <input name="_csrf" th:if="${_csrf}" th:value="${_csrf.token}" type="hidden">
            <button class="btn btn-primary" type="submit">退出</button>
        </form>
        <select aria-label="Default select example" id="findSelect">
            <option value="employeeName">姓名</option>
            <option value="employeeSex">性别</option>
            <option value="employeeAge">年龄</option>
            <option value="employeeIdCard">身份证号码</option>
            <option value="employeeAddress">住址</option>
            <option value="employeePhoneNumber">电话号码</option>
            <option value="createdBy">添加者</option>
            <option value="createdDate">添加时间</option>
            <option value="lastModifiedDate">最后操作时间</option>
        </select>
        <input aria-label="Text input with dropdown button" class="form-control findEmployee" id="findInput"
               placeholder="请输入搜索内容" required type="search">
        <button class="btn btn-primary findEmployee" id="findButton" type="button">查找员工</button>
        <!-- Button trigger modal -->
        <button class="btn btn-primary" data-bs-target="#exampleModal" data-bs-toggle="modal" id="save"
                type="button">添加员工
        </button>
    </div>
</div>
<div>
    <table class="table table-hover">
        <thead>
        <tr>
            <th>#</th>
            <th>姓名</th>
            <th>性别</th>
            <th>年龄</th>
            <th>身份证号码</th>
            <th>住址</th>
            <th>电话号码</th>
            <th>添加者</th>
            <th>添加时间</th>
            <th>最后操作时间</th>
            <th>更改</th>
            <th>删除</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="employee, stat: ${employees}" th:id="'trId' + ${stat.count}">
            <td th:text="${stat.count}"></td>
            <td>
                <label>
                    <input maxlength="25" th:value="${employee.employeeName}" type="text">
                </label>
            </td>
            <td>
                <label>
                    <select th:class="${employee.employeeSex}" th:id="'sexSelectId' + ${stat.count}">
                        <option value="男">男</option>
                        <option value="女">女</option>
                    </select>
                </label>
            </td>
            <td>
                <label>
                    <select th:class="${employee.employeeAge}" th:id="'ageSelectId' + ${stat.count}">
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                        <option value="32">32</option>
                        <option value="33">33</option>
                        <option value="34">34</option>
                        <option value="35">35</option>
                        <option value="36">36</option>
                        <option value="37">37</option>
                        <option value="38">38</option>
                        <option value="39">39</option>
                        <option value="40">40</option>
                        <option value="41">41</option>
                        <option value="42">42</option>
                        <option value="43">43</option>
                        <option value="44">44</option>
                        <option value="45">45</option>
                        <option value="46">46</option>
                        <option value="47">47</option>
                        <option value="48">48</option>
                        <option value="49">49</option>
                        <option value="50">50</option>
                        <option value="51">51</option>
                        <option value="52">52</option>
                        <option value="53">53</option>
                        <option value="54">54</option>
                        <option value="55">55</option>
                        <option value="56">56</option>
                        <option value="57">57</option>
                        <option value="58">58</option>
                        <option value="59">59</option>
                        <option value="60">60</option>
                        <option value="61">61</option>
                        <option value="62">62</option>
                        <option value="63">63</option>
                        <option value="64">64</option>
                        <option value="65">65</option>
                    </select>
                </label>
            </td>
            <td>
                <label>
                    <input maxlength="18" th:value="${employee.employeeIdCard}" type="text">
                </label>
            </td>
            <td>
                <label>
                    <input maxlength="45" th:value="${employee.employeeAddress}" type="text">
                </label>
            </td>
            <td>
                <label>
                    <input maxlength="11" th:value="${employee.employeePhoneNumber}" type="text">
                </label>
            </td>
            <td th:text="${employee.createdBy}"></td>
            <td th:text="${#dates.format(employee.createdDate, 'yyyy-MM-dd HH:mm:ss')}"></td>
            <td th:text="${#dates.format(employee.lastModifiedDate, 'yyyy-MM-dd HH:mm:ss')}"></td>
            <!-- <td th:text="${#temporals.format(employee.createdDate, 'yyyy-MM-dd HH:mm')}"></td> -->
            <!-- <td th:text="${#dates.format(employee.createdDate, 'yyyy-MM-dd HH:mm:ss')}"></td> -->
            <td>
                <!-- console.log('$(\'#username\').text()---------' + $('#username').text()); -->
                <button class="btn btn-primary updateEmployee" type="button">更改</button>
            </td>
            <td>
                <!--<form action="/employee/deleteEmployee" method="post">

                </form>-->
                <button class="btn btn-primary deleteEmployee" th:id="${employee.employeeId}" type="button">删除</button>
                <!--<a th:href="@{/employee/deleteEmployee(employeeId=${employee.employeeId})}">删除</a>-->
            </td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
            <td colspan="12">
                <div class="modal-footer no-margin-top">
                    <ul class="pagination pull-right no-margin" th:if="${employees != null}">
                        <li>
                            <a href="" id="frontPage">首页</a>
                        </li>
                        <li th:if="${employees.hasPrevious()}">
                            <a href="" id="previousPageable" th:class="${employees.previousPageable().getPageNumber()}">上一页</a>
                        </li>
                        <li th:each="pageNum:${#numbers.sequence(0, employees.getTotalPages() - 1)}">
                            <a th:href="'/employee?pageNum=' + ${pageNum}"
                               th:if="${pageNum ne employees.pageable.getPageNumber()}"
                               th:text="${pageNum + 1}"></a>
                            <a style='font-weight:bold;background: #6faed9;'
                               th:href="'/employee?pageNum=' + ${pageNum}"
                               th:if="${pageNum eq employees.pageable.getPageNumber()}" th:text="${pageNum + 1}"></a>
                        </li>
                        <li th:if="${employees.hasNext()}">
                            <a th:href="'/employee?pageNum=' + ${employees.nextPageable().getPageNumber()}">下一页</a>
                        </li>
                        <li>
                            <a th:href="'/employee?pageNum=' + ${employees.getTotalPages() - 1}">尾页</a>
                        </li>

                    </ul>
                </div>
            </td>
        </tr>
        </tfoot>
    </table>
</div>

<!-- Modal -->
<div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" data-bs-backdrop="static"
     id="exampleModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">新员工信息</h5>
                <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
            </div>
            <div class="modal-body">
                <form action="">
                    <div class="mb-3">
                        <label class="col-form-label" for="recipient-name">姓名:</label>
                        <input class="form-control" id="recipient-name" maxlength="25" required type="text">
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label" for="recipient-sxe">性别:</label>
                        <input class="form-control" id="recipient-sxe" required type="text">
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label" for="recipient-age">年龄:</label>
                        <input class="form-control" id="recipient-age" maxlength="2" required type="text">
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label" for="recipient-idCard">身份证号码:</label>
                        <input class="form-control" id="recipient-idCard" maxlength="18" required type="text">
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label" for="recipient-address">住址:</label>
                        <input class="form-control" id="recipient-address" maxlength="45" required type="text">
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label" for="recipient-phoneNumber">电话号码:</label>
                        <input class="form-control" id="recipient-phoneNumber" maxlength="11" required type="text">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">关闭</button>
                <button class="btn btn-primary" data-bs-dismiss="modal" id="saveEmployee" type="button">确定添加
                </button>
            </div>
        </div>
    </div>
</div>
</body>
</html>